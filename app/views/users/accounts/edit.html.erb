<h1 class="text-3xl font-bold text-gray-900 mb-6">Edit Profile</h1>

<div class="bg-white rounded-lg shadow p-6 max-w-2xl">
  <%= form_with model: @user, url: account_path, method: :patch do |form| %>
    <% if @user.errors.any? %>
      <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded">
        <h3 class="text-red-800 font-semibold mb-2">Please fix the following errors:</h3>
        <ul class="list-disc list-inside text-red-700">
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="space-y-6">
      <!-- Personal Information Section -->
      <div>
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Personal Information</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <%= form.label :full_name, 'Full Name', class: 'block text-sm font-medium text-gray-700' %>
            <%= form.text_field :full_name, class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm', required: true %>
          </div>
          <div>
            <%= form.label :phone, 'Phone Number', class: 'block text-sm font-medium text-gray-700' %>
            <%= form.telephone_field :phone, class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm' %>
          </div>
        </div>
      </div>

      <!-- Email Section -->
      <div>
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Email Address</h2>
        <div>
          <%= form.label :email, class: 'block text-sm font-medium text-gray-700' %>
          <%= form.email_field :email, class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm', required: true %>
          <p class="mt-1 text-sm text-gray-500">You will need to confirm your new email address if changed.</p>
        </div>
      </div>

      <!-- Password Section -->
      <div>
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Change Password</h2>
        <p class="text-sm text-gray-500 mb-4">Leave blank if you don't want to change your password.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <%= form.label :password, 'New Password', class: 'block text-sm font-medium text-gray-700' %>
            <%= form.password_field :password, autocomplete: 'new-password', class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm' %>
          </div>
          <div>
            <%= form.label :password_confirmation, 'Confirm New Password', class: 'block text-sm font-medium text-gray-700' %>
            <%= form.password_field :password_confirmation, autocomplete: 'new-password', class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm' %>
          </div>
        </div>
      </div>

      <!-- Current Password Section -->
      <div class="pt-4 border-t border-gray-200">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Verify Identity</h2>
        <p class="text-sm text-gray-500 mb-4">Enter your current password to save changes to your email or password.</p>
        <div class="max-w-md">
          <%= form.label :current_password, class: 'block text-sm font-medium text-gray-700' %>
          <%= form.password_field :current_password, autocomplete: 'current-password', class: 'mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm' %>
        </div>
      </div>

      <!-- Submit Buttons -->
      <div class="flex items-center justify-between pt-6 border-t border-gray-200">
        <%= link_to account_path, class: 'text-gray-600 hover:text-gray-800' do %>
          <%= icon('fa-solid', 'arrow-left', class: 'mr-2') %> Cancel
        <% end %>
        <%= form.submit 'Save Changes', class: 'px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 cursor-pointer' %>
      </div>
    </div>
  <% end %>
</div>
