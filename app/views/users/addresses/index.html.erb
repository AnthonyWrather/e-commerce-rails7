<h1 class="text-3xl font-bold text-gray-900 mb-6">My Addresses</h1>

<div class="mb-6">
  <%= link_to new_address_path, class: "inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" do %>
    <%= icon('fa-solid', 'plus', class: 'mr-2') %> Add New Address
  <% end %>
</div>

<% if @addresses.any? %>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @addresses.each do |address| %>
      <div class="bg-white rounded-lg shadow p-6 relative">
        <% if address.primary? %>
          <span class="absolute top-4 right-4 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
            Primary
          </span>
        <% end %>

        <h3 class="text-lg font-semibold text-gray-900 mb-2"><%= address.label %></h3>

        <div class="text-gray-700 space-y-1 mb-4">
          <p class="font-medium"><%= address.full_name %></p>
          <p><%= address.line1 %></p>
          <% if address.line2.present? %>
            <p><%= address.line2 %></p>
          <% end %>
          <p><%= address.city %><%= ", #{address.county}" if address.county.present? %></p>
          <p><%= address.postcode %></p>
          <p><%= address.country %></p>
          <% if address.phone.present? %>
            <p class="text-gray-500 text-sm mt-2"><%= address.phone %></p>
          <% end %>
        </div>

        <div class="flex flex-wrap gap-2 pt-4 border-t border-gray-200">
          <%= link_to edit_address_path(address), class: "text-blue-600 hover:text-blue-800 text-sm" do %>
            <%= icon('fa-solid', 'pen', class: 'mr-1') %> Edit
          <% end %>

          <% unless address.primary? %>
            <%= button_to set_primary_address_path(address), method: :patch, class: "text-green-600 hover:text-green-800 text-sm", data: { turbo_confirm: "Set this as your primary address?" } do %>
              <%= icon('fa-solid', 'star', class: 'mr-1') %> Set Primary
            <% end %>
          <% end %>

          <%= button_to address_path(address), method: :delete, class: "text-red-600 hover:text-red-800 text-sm", data: { turbo_confirm: "Are you sure you want to delete this address?" } do %>
            <%= icon('fa-solid', 'trash', class: 'mr-1') %> Delete
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="bg-white rounded-lg shadow p-8 text-center">
    <p class="text-gray-500 mb-4">You haven't saved any addresses yet.</p>
    <%= link_to new_address_path, class: "inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" do %>
      <%= icon('fa-solid', 'plus', class: 'mr-2') %> Add Your First Address
    <% end %>
  </div>
<% end %>
