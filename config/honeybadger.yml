---
# For more options, see https://docs.honeybadger.io/lib/ruby/gem-reference/configuration

# API key should be set via environment variable or Rails credentials for security
# Environment variable: HONEYBADGER_API_KEY
# Rails credentials: honeybadger.api_key
api_key: "<%= ENV['HONEYBADGER_API_KEY'] || Rails.application.credentials.dig(:honeybadger, :api_key) %>"

# The environment your app is running in.
env: "<%= Rails.env %>"

# The absolute path to your project folder.
root: "<%= Rails.root.to_s %>"

# Honeybadger won't report errors in these environments.
development_environments:
  - development
  - cucumber

# By default, Honeybadger won't report errors in the development_environments.
# Set to true in production and test (when HONEYBADGER_TEST_MODE is set) to enable error reporting.
report_data: <%= Rails.env.production? || (Rails.env.test? && ENV['HONEYBADGER_TEST_MODE'] == 'true') %>

# The current Git revision of your project. Defaults to the last commit hash.
# revision: null

# Enable verbose debug logging (useful for troubleshooting).
debug: false

# Enable Honeybadger Insights for performance monitoring
insights:
  enabled: <%= Rails.env.production? %>

# Test mode configuration
# Set HONEYBADGER_TEST_MODE=true in test environment to enable error reporting
test:
  backend: <%= ENV['HONEYBADGER_TEST_MODE'] == 'true' ? 'server' : 'null' %>

# Filter sensitive data from error reports
request:
  filter_keys:
    - password
    - password_confirmation
    - credit_card
    - card_number
    - cvv
    - stripe

# Breadcrumbs for debugging context
breadcrumbs:
  enabled: true

# Error grouping
exceptions:
  # Ignore common errors that don't need tracking
  ignore:
    - ActionController::RoutingError
    - ActiveRecord::RecordNotFound
    - ActionController::InvalidAuthenticityToken
